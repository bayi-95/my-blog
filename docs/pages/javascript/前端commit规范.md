---
title: 'å‰ç«¯ commit è§„èŒƒ'
description: é€šè¿‡éµå¾ªçº¦å®šå¼æäº¤è§„èŒƒï¼Œå¼€å‘äººå‘˜å¯ä»¥æ›´å®¹æ˜“åœ°ç†è§£å’Œç®¡ç†ä»£ç çš„å˜æ›´å†å²ï¼ŒåŒæ—¶ä¹Ÿä¸ºè‡ªåŠ¨åŒ–å·¥å…·æä¾›äº†æ›´å¤šå¯é çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬å·ã€å‘å¸ƒæ—¥å¿—å’Œä»£ç åº“æ›´æ–°ç­‰æ“ä½œã€‚
date: 2023-3-29
isPage: true
tags:
- å‰ç«¯
- commit
---



# å‰ç«¯ commit è§„èŒƒ



## 1. ä»€ä¹ˆæ˜¯çº¦å®šå¼æäº¤?

**çº¦å®šå¼æäº¤**ï¼ˆConventional Commitsï¼‰æ˜¯ä¸€ç§ç”¨äºä»£ç ç‰ˆæœ¬æ§åˆ¶çš„è§„èŒƒï¼Œæ—¨åœ¨é€šè¿‡æ˜ç¡®å’Œæ ‡å‡†åŒ–æäº¤ä¿¡æ¯æ¥æé«˜ä»£ç åä½œè´¨é‡å’Œæ•ˆç‡ã€‚å…¶åŸºæœ¬åŸåˆ™æ˜¯é€šè¿‡è§„å®šæäº¤ä¿¡æ¯çš„ç»“æ„å’Œè¯­ä¹‰æ¥æé«˜ä»£ç ç‰ˆæœ¬æ§åˆ¶çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œè‡ªåŠ¨åŒ–ç¨‹åº¦ã€‚

çº¦å®šå¼æäº¤è§„èŒƒé€šå¸¸è¦æ±‚æäº¤ä¿¡æ¯åŒ…æ‹¬ä¸€ä¸ªæè¿°æ€§çš„"ç±»å‹"ã€ä¸€ä¸ªå¯é€‰çš„"ä½œç”¨åŸŸ"ã€ä¸€ä¸ªç”¨äºç®€æ´è¯´æ˜çš„"ä¸»é¢˜"ï¼Œä»¥åŠå¯é€‰çš„"æ­£æ–‡"å’Œ"å°¾éƒ¨"ç­‰ç»„æˆéƒ¨åˆ†ã€‚è¿™äº›ç»„æˆéƒ¨åˆ†çš„æ ¼å¼å’Œè¯­ä¹‰éƒ½æ˜¯æ ¹æ®è§„èŒƒè¦æ±‚è¿›è¡Œçº¦å®šçš„ï¼Œæ¯”å¦‚ä½¿ç”¨"feat"æ¥è¡¨ç¤ºæ–°åŠŸèƒ½ã€"fix"è¡¨ç¤ºä¿®å¤é”™è¯¯ã€"docs"è¡¨ç¤ºæ–‡æ¡£å˜æ›´ç­‰ã€‚

é€šè¿‡éµå¾ªçº¦å®šå¼æäº¤è§„èŒƒï¼Œå¼€å‘äººå‘˜å¯ä»¥æ›´å®¹æ˜“åœ°ç†è§£å’Œç®¡ç†ä»£ç çš„å˜æ›´å†å²ï¼ŒåŒæ—¶ä¹Ÿä¸ºè‡ªåŠ¨åŒ–å·¥å…·æä¾›äº†æ›´å¤šå¯é çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬å·ã€å‘å¸ƒæ—¥å¿—å’Œä»£ç åº“æ›´æ–°ç­‰æ“ä½œã€‚

æäº¤è¯´æ˜çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤º:

**åŸæ–‡ï¼š**

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

**è¯‘æ–‡ï¼š**

```
<ç±»å‹>[å¯é€‰ èŒƒå›´]: <æè¿°>

[å¯é€‰ æ­£æ–‡]

[å¯é€‰ è„šæ³¨]
```

æäº¤è¯´æ˜åŒ…å«äº†ä¸‹é¢çš„ç»“æ„åŒ–å…ƒç´ ï¼Œä»¥å‘ç±»åº“ä½¿ç”¨è€…è¡¨æ˜å…¶æ„å›¾ï¼š

1. **fix:** _ç±»å‹_ ä¸º `fix` çš„æäº¤è¡¨ç¤ºåœ¨ä»£ç åº“ä¸­ä¿®å¤äº†ä¸€ä¸ª bugï¼ˆè¿™å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­çš„ [`PATCH`](https://link.juejin.cn/?target=https%3A%2F%2Fsemver.org%2Flang%2Fzh-CN%2F%23%25E6%2591%2598%25E8%25A6%2581 'https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81') ç›¸å¯¹åº”ï¼‰ã€‚

2. **feat:** _ç±»å‹_ ä¸º `feat` çš„æäº¤è¡¨ç¤ºåœ¨ä»£ç åº“ä¸­æ–°å¢äº†ä¸€ä¸ªåŠŸèƒ½ï¼ˆè¿™å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­çš„ [`MINOR`](https://link.juejin.cn/?target=https%3A%2F%2Fsemver.org%2Flang%2Fzh-CN%2F%23%25E6%2591%2598%25E8%25A6%2581 'https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81') ç›¸å¯¹åº”ï¼‰ã€‚

3. **BREAKING CHANGE:** åœ¨è„šæ³¨ä¸­åŒ…å« `BREAKING CHANGE:` æˆ– <ç±»å‹>(èŒƒå›´) åé¢æœ‰ä¸€ä¸ª `!` çš„æäº¤ï¼Œè¡¨ç¤ºå¼•å…¥äº†ç ´åæ€§ API å˜æ›´ï¼ˆè¿™å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­çš„ [`MAJOR`](https://link.juejin.cn/?target=https%3A%2F%2Fsemver.org%2Flang%2Fzh-CN%2F%23%25E6%2591%2598%25E8%25A6%2581 'https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81') ç›¸å¯¹åº”ï¼‰ã€‚ ç ´åæ€§å˜æ›´å¯ä»¥æ˜¯ä»»æ„ _ç±»å‹_ æäº¤çš„ä¸€éƒ¨åˆ†ã€‚

4. é™¤ `fix:` å’Œ `feat:` ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒæäº¤ _ç±»å‹_ ï¼Œä¾‹å¦‚ [@commitlint/config-conventional](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fconventional-changelog%2Fcommitlint%2Ftree%2Fmaster%2F%2540commitlint%2Fconfig-conventional 'https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional')ï¼ˆåŸºäº [Angular çº¦å®š](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fangular%2Fangular%2Fblob%2F22b96b9%2FCONTRIBUTING.md%23-commit-message-guidelines 'https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines')ï¼‰ä¸­æ¨èçš„ `build:`ã€`chore:`ã€ `ci:`ã€`docs:`ã€`style:`ã€`refactor:`ã€`perf:`ã€`test:`ï¼Œç­‰ç­‰ã€‚

5. è„šæ³¨ä¸­é™¤äº† `BREAKING CHANGE: <description>` ï¼Œå…¶å®ƒæ¡ç›®åº”è¯¥é‡‡ç”¨ç±»ä¼¼ [git trailer format](https://link.juejin.cn/?target=https%3A%2F%2Fgit-scm.com%2Fdocs%2Fgit-interpret-trailers 'https://git-scm.com/docs/git-interpret-trailers') è¿™æ ·çš„æƒ¯ä¾‹ã€‚

å…¶å®ƒæäº¤ç±»å‹åœ¨çº¦å®šå¼æäº¤è§„èŒƒä¸­å¹¶æ²¡æœ‰å¼ºåˆ¶é™åˆ¶ï¼Œå¹¶ä¸”åœ¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­æ²¡æœ‰éšå¼å½±å“ï¼ˆé™¤éå®ƒä»¬åŒ…å« BREAKING CHANGEï¼‰ã€‚ å¯ä»¥ä¸ºæäº¤ç±»å‹æ·»åŠ ä¸€ä¸ªå›´åœ¨åœ†æ‹¬å·å†…çš„èŒƒå›´ï¼Œä»¥ä¸ºå…¶æä¾›é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¾‹å¦‚ `feat(parser): adds ability to parse arrays.`ã€‚

### ç¤ºä¾‹

åŒ…å«äº†æè¿°å¹¶ä¸”è„šæ³¨ä¸­æœ‰ç ´åæ€§å˜æ›´çš„æäº¤è¯´æ˜

```
feat: allow provided config object to extend other configs

BREAKING CHANGE: `extends` key in config file is now used for extending other config files
```

åŒ…å«äº† `!` å­—ç¬¦ä»¥æé†’æ³¨æ„ç ´åæ€§å˜æ›´çš„æäº¤è¯´æ˜

```
feat!: send an email to the customer when a product is shipped
```

åŒ…å«äº†èŒƒå›´å’Œç ´åæ€§å˜æ›´ `!` çš„æäº¤è¯´æ˜

```
feat(api)!: send an email to the customer when a product is shipped
```

åŒ…å«äº† `!` å’Œ BREAKING CHANGE è„šæ³¨çš„æäº¤è¯´æ˜

```
chore!: drop support for Node 6

BREAKING CHANGE: use JavaScript features not available in Node 6.
```

ä¸åŒ…å«æ­£æ–‡çš„æäº¤è¯´æ˜

```
docs: correct spelling of CHANGELOG
```

åŒ…å«èŒƒå›´çš„æäº¤è¯´æ˜

```
feat(lang): add polish language
```

åŒ…å«å¤šè¡Œæ­£æ–‡å’Œå¤šè¡Œè„šæ³¨çš„æäº¤è¯´æ˜

```
fix: prevent racing of requests

Introduce a request id and a reference to latest request. Dismiss
incoming responses other than from latest request.

Remove timeouts which were used to mitigate the racing issue but are
obsolete now.

Reviewed-by: Z
Refs: #123
```

### type ç±»å‹æ¦‚è§ˆ

| å€¼       | æè¿°                                                                                   |
| -------- | -------------------------------------------------------------------------------------- |
| feat     | æ–°å¢ä¸€ä¸ªåŠŸèƒ½                                                                           |
| fix      | ä¿®å¤ä¸€ä¸ª Bug                                                                           |
| docs     | æ–‡æ¡£å˜æ›´                                                                               |
| style    | ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼Œä¾‹å¦‚ç©ºæ ¼ã€åˆ†å·ç­‰æ ¼å¼ä¿®æ­£ï¼‰                                       |
| refactor | ä»£ç é‡æ„                                                                               |
| perf     | æ”¹å–„æ€§èƒ½                                                                               |
| test     | æµ‹è¯•                                                                                   |
| build    | å˜æ›´é¡¹ç›®æ„å»ºæˆ–å¤–éƒ¨ä¾èµ–ï¼ˆä¾‹å¦‚ scopes: webpackã€gulpã€npm ç­‰ï¼‰                           |
| ci       | æ›´æ”¹æŒç»­é›†æˆè½¯ä»¶çš„é…ç½®æ–‡ä»¶å’Œ package ä¸­çš„ scripts å‘½ä»¤ï¼Œä¾‹å¦‚ scopes: Travis, Circle ç­‰ |
| chore    | å˜æ›´æ„å»ºæµç¨‹æˆ–è¾…åŠ©å·¥å…·                                                                 |
| revert   | ä»£ç å›é€€                                                                               |

&nbsp;

## **2. ä¸ºä»€ä¹ˆéœ€è¦çº¦å®šå¼æäº¤ï¼Ÿ**

Git æäº¤ä¿¡æ¯éœ€è¦éµå¾ª Angular çº¦å®šæ˜¯ä¸ºäº†ä½¿æäº¤ä¿¡æ¯æ ¼å¼æ¸…æ™°ã€æ˜“äºé˜…è¯»å’Œç†è§£ï¼Œä»è€Œæé«˜ä»£ç åä½œçš„æ•ˆç‡ã€‚Angular çº¦å®šåŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ï¼š

1.  æ ‡é¢˜ï¼ˆheaderï¼‰ï¼šç”¨ä¸€è¡Œç®€çŸ­çš„æè¿°æ¥æ€»ç»“æ›´æ”¹å†…å®¹ï¼Œå¹¶ä½¿ç”¨ç‰¹æ®Šå…³é”®å­—æŒ‡å®šæ›´æ”¹ç±»å‹å’Œå½±å“èŒƒå›´ã€‚
2.  æ­£æ–‡ï¼ˆbodyï¼‰ï¼šæä¾›æ›´è¯¦ç»†çš„æ›´æ”¹æè¿°ï¼ŒåŒ…æ‹¬æ›´æ”¹åŸå› ã€å½±å“å’Œè§£å†³æ–¹æ¡ˆç­‰ä¿¡æ¯ã€‚
3.  é¡µè„šï¼ˆfooterï¼‰ï¼šæä¾›ä¸€äº›é™„åŠ ä¿¡æ¯ï¼Œå¦‚ç›¸å…³é“¾æ¥ã€å…³è”çš„ BUG ç¼–å·ç­‰ã€‚

é€šè¿‡éµå¾ª Angular çº¦å®šï¼Œå¯ä»¥ä½¿æäº¤ä¿¡æ¯æ›´åŠ è§„èŒƒåŒ–å’Œæ˜“äºç®¡ç†ï¼Œä»è€Œæ–¹ä¾¿å…¶ä»–å›¢é˜Ÿæˆå‘˜é˜…è¯»å’Œç†è§£æ›´æ”¹çš„å«ä¹‰ï¼Œä»è€Œæé«˜å›¢é˜Ÿåä½œæ•ˆç‡ã€‚æ­¤å¤–ï¼Œéµå¾ª Angular çº¦å®šçš„æäº¤ä¿¡æ¯è¿˜å¯ä»¥æ›´å¥½åœ°ä¸è®¸å¤šè‡ªåŠ¨åŒ–å·¥å…·è¿›è¡Œé›†æˆï¼Œå¦‚è‡ªåŠ¨åŒ–ç‰ˆæœ¬æ§åˆ¶ã€ä»£ç å®¡æŸ¥å·¥å…·ç­‰ã€‚

&nbsp;

## **3. å¦‚ä½•éµå®ˆçº¦å®šå¼æäº¤ï¼Ÿ**

### ç¬¬ä¸€æ­¥ï¼šCommitizen=>è‡ªåŠ¨ç”Ÿæˆæäº¤è¯´æ˜çš„å·¥å…·

> Commitizen æ˜¯ä¸€ä¸ªåŸºäºå‘½ä»¤è¡Œçš„äº¤äº’å¼å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…è§„èŒƒåŒ–æäº¤ Git æäº¤ä¿¡æ¯ï¼Œç¬¦åˆ Angular Commit Message Conventions çš„è§„èŒƒï¼Œä»è€Œæ›´å¥½åœ°ç®¡ç†ä»£ç å˜æ›´å†å²ã€‚

Commitizen æä¾›äº†ä¸€ä¸ªå‹å¥½çš„å‘½ä»¤è¡Œäº¤äº’ç•Œé¢ï¼Œè®©å¼€å‘è€…æ ¹æ®è§„èŒƒé€‰æ‹©æäº¤ä¿¡æ¯çš„ç±»å‹ã€å½±å“èŒƒå›´ç­‰å†…å®¹ï¼Œè‡ªåŠ¨ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ Git æäº¤ä¿¡æ¯ã€‚

Commitizen å¯ä»¥ä¸ Git ç»“åˆä½¿ç”¨ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥ä½¿ç”¨ commitizen å‘½ä»¤ä»£æ›¿ git commit å‘½ä»¤æäº¤ä»£ç å˜æ›´ï¼Œå¹¶ä¸”ç”Ÿæˆçš„æäº¤ä¿¡æ¯æ ¼å¼æ›´åŠ è§„èŒƒåŒ–å’Œæ˜“äºç®¡ç†ã€‚

**è¿™é‡Œæˆ‘å»ºè®®æ‚¨å…¨å±€å®‰è£…**

```shell
pnpm install -g commitizen
pnpm install -g cz-conventional-changelog
```

éšååœ¨ç”µè„‘ç”¨æˆ·æ ¹ç›®å½•ç©¿ä»¶.czrc æ–‡ä»¶ï¼Œä¸ç„¶ä½¿ç”¨çš„æ—¶å€™ä¼šè¿›å…¥å‘½ä»¤è¡Œï¼ˆç¬”è€…çš„ç³»ç»Ÿä¸º Ubuntu20.04ï¼‰

```shell
echo '{ "path": "cz-conventional-changelog" }' > ~/.czrc
```

éšåä½¿ç”¨**commitizen**ç”Ÿæˆç¬¦åˆ AngularJS è§„èŒƒçš„**æäº¤è¯´æ˜**

```shell
commitizen init cz-conventional-changelog --save --save-exact
```

éšåä½ å°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è·å¾—ä¸­è§„ä¸­è·çš„ commit ä¿¡æ¯äº†ã€‚

```shell
git cz
```

### ç¬¬äºŒæ­¥ï¼šCz-customizable=> å®¢åˆ¶åŒ–è‡ªåŠ¨æäº¤ä¿¡æ¯

> **cz-customizable æ˜¯ Commitizen çš„ä¸€ä¸ªæ’ä»¶**ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…è‡ªå®šä¹‰ç¬¦åˆ Angular Commit Message Conventions çš„æäº¤ä¿¡æ¯æ ¼å¼å’Œå†…å®¹ã€‚

**æ‹œæ‰˜ï¼Œäººåˆä¸æ˜¯æœºå™¨ï¼åˆ«é‚£ä¹ˆæ­»æ¿ã€‚å’Œä»£ç æ‰“äº¤é“æœ€é‡è¦çš„äº‹æƒ…å°±æ˜¯æ‡‚å¾—å¦‚ä½•è‹¦ä¸­ä½œä¹ï¼Œåœ¨é‡åˆ°æŒ‘æˆ˜å’Œå›°éš¾æ—¶ï¼Œä¼˜ç§€çš„äººèƒ½å¤Ÿé‡‡å–ç§¯æçš„å¿ƒæ€ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¯»æ‰¾è§£å†³é—®é¢˜çš„æ–¹å¼å’Œæ–¹æ³•ã€‚**

cz-customizable æä¾›äº†ä¸€äº›é…ç½®é€‰é¡¹ï¼Œè®©å¼€å‘è€…å¯ä»¥æ ¹æ®é¡¹ç›®çš„éœ€è¦è‡ªå®šä¹‰æäº¤ä¿¡æ¯çš„æ ¼å¼å’Œå†…å®¹ã€‚

cz-customizable çš„é…ç½®é€‰é¡¹åŒ…æ‹¬ï¼š

1.  `types`: å®šä¹‰æäº¤ä¿¡æ¯çš„ç±»å‹ï¼Œå¦‚ featï¼ˆæ–°åŠŸèƒ½ï¼‰ã€fixï¼ˆä¿®å¤ Bugï¼‰ç­‰ã€‚
2.  `scopes`: å®šä¹‰æäº¤ä¿¡æ¯çš„å½±å“èŒƒå›´ï¼Œå¦‚æ¨¡å—ã€ç»„ä»¶ç­‰ã€‚
3.  `allowCustomScopes`: æ˜¯å¦å…è®¸è‡ªå®šä¹‰å½±å“èŒƒå›´ã€‚
4.  `scopeOverrides`: å®šä¹‰ä¸åŒç±»å‹çš„æäº¤ä¿¡æ¯å¯¹å½±å“èŒƒå›´çš„è¦æ±‚ã€‚
5.  `messages`: å®šä¹‰æäº¤ä¿¡æ¯çš„æ¨¡æ¿ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€æ­£æ–‡ã€é¡µè„šç­‰å†…å®¹ã€‚
6.  `allowBreakingChanges`: æ˜¯å¦å…è®¸æäº¤ç ´åæ€§å˜æ›´ã€‚

#### 1\. å®‰è£… cz-customizable

```shell
npm install cz-customizable --save-dev
```

#### 2\. æ·»åŠ ä»¥ä¸‹é…ç½®åˆ°`package.json`ä¸­

```
"config": {
    "commitizen": {
        "path": "node_modules/cz-customizable"
    }
}
```

#### 3.é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º`.cz-config.js`æ–‡ä»¶æ¥è‡ªå®šä¹‰æç¤º

```markdown
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ commitlint.config.js
â”œâ”€â”€ index.html
â”œâ”€â”€ node_modules
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ public
â”œâ”€â”€ README.md
â”œâ”€â”€ src
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ .cz-config.js // åˆ›å»º
```

#### ä»¥ä¸‹æ˜¯æˆ‘çš„ä¸€äº›å‚è€ƒé…ç½®

```js
module.exports = {
    // å¯é€‰ç±»å‹
    types: [
        {
            value: ':sparkles: feat',
            name: 'âœ¨ feat:      æ–°åŠŸèƒ½'
        },
        {
            value: ':bug: fix',
            name: 'ğŸ› fix:      ä¿®å¤'
        },
        {
            value: ':memo: docs',
            name: 'ğŸ“ docs:      æ–‡æ¡£å˜æ›´'
        },
        {
            value: ':lipstick: style',
            name: 'ğŸ’„ style:     ä»£ç æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)'
        },
        {
            value: ':recycle: refactor',
            name: 'â™»ï¸  refactor:    é‡æ„ (æ—¢ä¸å¢åŠ feature, ä¹Ÿä¸æ˜¯ä¿®å¤bug)'
        },
        {
            value: ':zap: perf',
            name: 'âš¡ï¸ perf:      æ€§èƒ½ä¼˜åŒ–'
        },
        {
            value: ':white_check_mark: test',
            name: 'âœ… test:      å¢åŠ æµ‹è¯•'
        },
        {
            value: ':wrench: chore',
            name: 'ğŸ”§ chore:     æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨'
        },
        {
            value: ':rewind: revert',
            name: 'âª revert:     å›é€€'
        },
        {
            value: ':rocket: build',
            name: 'ğŸš€ build:     æ‰“åŒ…'
        }
    ],
    // æ­¥éª¤
    messages: {
        type: 'è¯·é€‰æ‹©æäº¤çš„ç±»å‹ï¼š',
        customScope: 'æƒ…è¾“å…¥ä¿®æ”¹çš„èŒƒå›´(å¯é€‰)',
        subject: 'è¯·ç®€è¦æè¿°æäº¤(å¿…å¡«)',
        body: 'è¯·è¾“å…¥è¯¦ç»†æè¿°(å¯é€‰)',
        footer: 'è¯·è¾“å…¥è¦å…³é—­çš„issus(å¯é€‰)',
        confirmCommit: 'ç¡®è®¤è¦ä½¿ç”¨ä»¥ä¸Šä¿¡æ¯æäº¤ï¼Ÿ(y/n)'
    },
    // é»˜è®¤é•¿åº¦72
    subjectLimit: 72
}
```

æ­¤æ—¶å†æ¬¡è¿è¡Œ `git cz`æ—¶å°±å¯ä»¥çœ‹åˆ°

```shell
? è¯·é€‰æ‹©æäº¤çš„ç±»å‹ï¼š (Use arrow keys)
â¯ âœ¨ feat:      æ–°åŠŸèƒ½
  ğŸ› fix:      ä¿®å¤
  ğŸ“ docs:      æ–‡æ¡£å˜æ›´
  ğŸ’„ style:     ä»£ç æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)
  â™»ï¸  refactor:    é‡æ„ (æ—¢ä¸å¢åŠ feature, ä¹Ÿä¸æ˜¯ä¿®å¤bug)
  âš¡ï¸ perf:      æ€§èƒ½ä¼˜åŒ–
  âœ… test:      å¢åŠ æµ‹è¯•
```

### ç¬¬ä¸‰æ­¥ï¼šCommitlint=> å¯¹è‡ªåŠ¨ç”Ÿæˆ commit ä¿¡æ¯çš„æ ¡éªŒ

**å¾ˆé—æ†¾çš„æ˜¯ï¼Œä¸Šé¢çš„æ“ä½œå¹¶æ²¡æœ‰ä»»ä½•æ ¡éªŒåŠŸèƒ½ï¼Œä½ çš„é˜Ÿå‹ä»ç„¶å¯ä»¥æäº¤ trash åœ¨ commit ä¿¡æ¯ä¸­ã€‚å¦‚æœä¸æ•²ä½ æ˜¯é˜Ÿä¼ä¸­çš„å®¡æ ¸äººå‘˜ï¼Œé‚£ä¹ˆæˆ‘æƒ³ä½ éœ€è¦è®¾ç½®ä¸€äº›è§„èŒƒ**

Commitlint å¸®åŠ©ä½ è¿›è¡Œ`git commit -m "æäº¤è¯´æ˜"`æ“ä½œæ—¶ï¼Œå¯¹æäº¤è¯´æ˜ä¼šæŒ‰ç…§`commitlint.config.js` é…ç½®çš„è§„åˆ™è¿›è¡Œæ ¡éªŒï¼Œä¸é€šè¿‡åˆ™ä¸èƒ½æäº¤ è¿™é‡Œæˆ‘ä»¬åˆ†æƒ…å†µè®¨è®ºï¼š

è‹¥æ‚¨**æ²¡æœ‰ä½¿ç”¨ cz-customizable **é€‚é…å™¨**åšäº†ç ´å Angular é£æ ¼çš„æäº¤è¯´æ˜é…ç½®**ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®æ–¹æ¡ˆ

1.å®‰è£… `@commitlint/config-conventional`

```
npm i @commitlint/config-conventional @commitlint/cli -D
```

2.åœ¨æ ¹ç›®å½•åˆ›å»º`commitlint.config.js`æ–‡ä»¶ï¼Œé…ç½®`commitlint`

```
module.exports = {
  extends: ['@commitlint/config-conventional']
}
```

è‹¥æ‚¨ä½¿ç”¨ **cz-customizable** äº†åˆ™éœ€è¦ä½¿ç”¨ä»¥ä¸‹é…ç½®æ–¹æ¡ˆ

```
npm install commitlint-config-cz --save-dev

```

ç„¶ååŠ å…¥`commitlint`æ ¡éªŒè§„åˆ™é…ç½®ï¼š

```
module.exports = {
  extends: [
     'cz'
  ]
};
```

è¿™é‡Œæˆ‘è¯´æ˜ä¸€ä¸‹ï¼š`cz` å®é™…ä¸Šæ˜¯ `commitlint-config-cz` çš„ç®€å†™ï¼Œè¿™ä¸ªç®€å†™æ˜¯åœ¨ `commitlint` ä¸­é¢„å®šä¹‰çš„ã€‚`cz` é…ç½®æ–‡ä»¶æœ¬èº«å¹¶ä¸å­˜åœ¨ï¼Œå®ƒå®é™…ä¸Šæ˜¯é€šè¿‡æ‰©å±• `commitlint-config-cz` é…ç½®æ–‡ä»¶æ¥å®ç°çš„ã€‚`commitlint-config-cz` åœ¨è§„èŒƒ Git æäº¤ä¿¡æ¯çš„æ—¶å€™ï¼Œä¼šè¯»å– `cz-config.js` ä¸­çš„é…ç½®ä¿¡æ¯ã€‚

### commitizenã€cz-customizableã€commitlint ä¸‰è€…ä¹‹é—´çš„å…³ç³»

-   `commitizen` å°±åƒæ˜¯ç”Ÿäº§çº¿ä¸Šçš„æ¨¡æ¿ï¼Œå®ƒå®šä¹‰äº†äº§å“çš„å¤–è§‚å’Œç»“æ„ï¼Œæä¾›äº†ä¸€ç§æ˜“äºç†è§£å’Œä½¿ç”¨çš„æ¨¡æ¿æ¥ç”Ÿæˆè§„èŒƒåŒ–çš„æäº¤ä¿¡æ¯ã€‚
-   `cz-customizable` å°±åƒæ˜¯ç”Ÿäº§çº¿ä¸Šçš„è°ƒæ•´æœºå™¨ï¼Œä½ å¯ä»¥ç»™äº§å“æ¢ä¸ªé¢œè‰²ï¼Œæ¢ä¸ªåŒ…è£…ç­‰ç­‰ã€‚å®ƒå¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚å¯¹æ¨¡æ¿è¿›è¡Œå®šåˆ¶ï¼Œé€‚åº”ä¸åŒçš„é¡¹ç›®éœ€æ±‚ã€‚
-   `commitlint` å°±åƒæ˜¯ç”Ÿäº§çº¿ä¸Šçš„æ£€æµ‹è®¾å¤‡ï¼Œè¿™æ„å‘³ç€ä¸ç®¡ä½ å¦‚ä½•å» DIY è¿™ä¸ªäº§å“ï¼Œä»–æ€»è¦æœ‰ä¸€ä¸ªå®¡æ ¸æ ‡å‡†æ¥è¯´æ˜ä»–æ˜¯ä¸€ä¸ªåˆæ ¼äº§å“ã€‚è€Œ`commitlint` æ”¯æŒå¤šç§è§„èŒƒé…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­å°±åŒ…æ‹¬ `commitlint-config-cz`ï¼Œå®ƒç»§æ‰¿äº† `commitlint-config-conventional` çš„åŸºç¡€è§„èŒƒï¼Œå¹¶å¢åŠ äº†å¯¹ `commitizen` è§„èŒƒçš„æ”¯æŒã€‚

&nbsp;
## 4. æœ€åçš„ä¸€äº›è¡¥å…… â€”â€” husky

> Husy æ˜¯ä¸€ä¸ªä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ Git hooks çš„å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©ä½ åœ¨é¡¹ç›®ä¸­è‡ªåŠ¨åŒ–åœ°æ‰§è¡Œä¸€äº› Git ç›¸å…³çš„æ“ä½œã€‚ä½¿ç”¨ huskyï¼Œä½ å¯ä»¥åœ¨ Git çš„ä¸€äº›å…³é”®æ“ä½œï¼ˆä¾‹å¦‚æäº¤ã€æ¨é€ã€åˆå¹¶ç­‰ï¼‰å‰æˆ–åï¼Œæ‰§è¡Œä¸€äº›è„šæœ¬æˆ–å‘½ä»¤ï¼Œæ¯”å¦‚ä»£ç æ ¼å¼åŒ–ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ‰“åŒ…å‘å¸ƒç­‰ã€‚

**å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬é¢å¤–æ‹¦æˆªä¸€äº›å¦‚ `git commit` ç­‰æŒ‡ä»¤**ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œhusky åªåœ¨ Git ä»“åº“ä¸­æ‰èƒ½æ­£å¸¸å·¥ä½œï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰è¯·ç¡®ä¿ä½ çš„é¡¹ç›®å·²ç»åˆå§‹åŒ–ä¸º Git ä»“åº“

#### 1. å®‰è£… husky

1.  åœ¨é¡¹ç›®ä¸­å®‰è£… huskyï¼Œå¯ä»¥ä½¿ç”¨ npm æˆ–è€… yarn è¿›è¡Œå®‰è£…ï¼š

```
pnpm install husky --save-dev
```

æˆ–è€…

```
yarn add husky --dev
```

#### 2. åœ¨ package.json ä¸­å®šä¹‰éœ€è¦æ‰§è¡Œçš„ Git hooks å’Œå¯¹åº”çš„è„šæœ¬

ä¾‹å¦‚ï¼Œåœ¨æäº¤ä»£ç å‰æ‰§è¡Œä»£ç æ ¼å¼åŒ–å’Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼š

```json
{
    "husky": {
        "hooks": {
            "pre-commit": "npm run lint && npm run test"
        }
    }
}
```

è¿™æ ·ï¼Œæ¯æ¬¡åœ¨æ‰§è¡Œ`git commit`å‘½ä»¤æ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œ npm ä¸­å®šä¹‰çš„`lint`å’Œ`test`å‘½ä»¤ã€‚

é™¤äº†`pre-commit`é’©å­ï¼Œhusky è¿˜æ”¯æŒå…¶ä»–ä¸€äº› Git hooksï¼Œæ¯”å¦‚`pre-push`ã€`post-merge`ã€`post-checkout`ç­‰ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œé…ç½®ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œhusky åªåœ¨ Git ä»“åº“ä¸­æ‰èƒ½æ­£å¸¸å·¥ä½œï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰è¯·ç¡®ä¿ä½ çš„é¡¹ç›®å·²ç»åˆå§‹åŒ–ä¸º Git ä»“åº“ã€‚

å½“ç„¶ é™¤äº†åœ¨`pageage.json`ä¸­è®¾ç½®ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨

`npx husky add .husky/pre-commit`æ¥ç”Ÿæˆä¸€ä¸ª hook çš„æ–‡ä»¶

éšåä½ ä¹Ÿå¯ä»¥åœ¨ç›¸åº”çš„æ–‡ä»¶ä¸­ä¹¦å†™è¦æ‰§è¡Œçš„è„šæœ¬äº†

```
./.husky/
â”œâ”€â”€ _
â”‚    â””â”€â”€ husky.sh
â”œâ”€â”€ commit-msg
â””â”€â”€ pre-commit // å†æ­¤å†™å…¥
```

#### 3. ä½¿ç”¨ lint-staged, å¯¹æš‚å­˜åŒºä»£ç è¿›è¡Œ eslint æ ¡éªŒå’Œ prettier æ ¼å¼åŒ–

ç°åœ¨æˆ‘ä»¬å·²ç»çº¦æŸäº†æäº¤è§„èŒƒï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›åœ¨æäº¤å‰å¯¹å½“å‰çš„ä»£ç è¿›è¡Œæ ¼å¼éªŒè¯å’Œä¿®å¤ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨åˆ°`lint-staged`

1. å®‰è£… `npm i lint-staged --save-dev`

2. åœ¨`package.json`ä¸­æ–°å¢é…ç½®ï¼Œä»¥ä¸Šæ“ä½œå¯ä»¥å®ç°ï¼Œæ¯æ¬¡è¿›è¡Œ`git commit` æ“ä½œï¼Œå°†æ‰§è¡Œ`pre-commit`é’©å­é‡Œé¢çš„ä»£ç ï¼Œä»è€Œæ‰§è¡Œ`lint-staged`é…ç½®é¡¹çš„å‘½ä»¤

    ```
    "lint-staged": {
      "**/*.scss": "stylelint --syntax scss",
      "**/*.{js,jsx, tsx,ts }": "npm run lint-staged:js",
      "**/*.{js,jsx,tsx,ts,less,scss,md,json}": [
        "prettier --write"
      ]
    }
    ```

3. åœ¨`package.json`ä¸­æ–°å¢ `lint-staged` å’Œ `lint-staged.js` å‘½ä»¤

    ```
    "scripts": {
        "lint-staged": "lint-staged",
        "lint-staged:js": "eslint --ext .js,.jsx,.ts,.tsx "
    }
    ```

4. æœ€ååœ¨ `pre-commit`ä¸­æ–°å¢è„šæœ¬

    ```
    npm run lint-staged
    ```

&nbsp;
## 5. é€ç»™è¯»è€…çš„è¯

ä½¿ç”¨ commit è§„èŒƒå¯ä»¥å¸®åŠ©è‡ªå·±æ›´å¥½åœ°è®°å½•å’Œè¿½è¸ªä»£ç çš„å˜åŒ–ã€‚é€šè¿‡è§„èŒƒçš„ commit messageï¼Œå¯ä»¥æ¸…æ™°åœ°è®°å½•ä¸‹æ¯æ¬¡æäº¤ä»£ç æ‰€åšçš„æ›´æ”¹å’ŒåŸå› ã€‚è¿™æœ‰åŠ©äºåœ¨ä»¥åå›é¡¾ä»£ç æ—¶æ›´å¥½åœ°ç†è§£ä»£ç çš„å˜åŒ–å’ŒèƒŒåçš„åŸå› ã€‚éµå¾ªè§„èŒƒï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬æ›´åŠ ä¸“ä¸šå’Œé«˜æ•ˆåœ°å¤„ç†äº‹ç‰©ã€‚

&nbsp;
## 6. æ¥æº

- [2023 å¹´äº†ï¼Œè¿˜æœ‰å‰ç«¯äººä¸çŸ¥é“ commit è§„èŒƒ ï¼Ÿ](https://juejin.cn/post/7212597327579037756)
- [Cz å·¥å…·é›†ä½¿ç”¨ä»‹ç» - è§„èŒƒ Git æäº¤è¯´æ˜](https://juejin.cn/post/6844903831893966856#heading-18%C2%A0 'https://juejin.cn/post/6844903831893966856#heading-18%C2%A0')
- [Commitizen çº¦å®šå¼æäº¤](https://juejin.cn/post/7104104607009210382#heading-4%C2%A0 'https://juejin.cn/post/7104104607009210382#heading-4%C2%A0')
- [Commitizen + husky è§„èŒƒæäº¤ä¿¡æ¯](https://juejin.cn/post/7091206349597442056 'https://juejin.cn/post/7091206349597442056')
